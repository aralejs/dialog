define("#dialog/0.9.1/base-dialog",["$","#overlay/0.9.11/overlay","#position/1.0.0/position","#iframe-shim/1.0.0/iframe-shim","#widget/1.0.2/widget","#base/1.0.1/base","#class/1.0.0/class","#events/1.0.0/events","#overlay/0.9.11/mask"],function(e,t,n){function f(e){e.attr("tabindex")==null&&e.attr("tabindex","-1")}var r=e("$"),i=e("#overlay/0.9.11/overlay"),s=e("#overlay/0.9.11/mask"),o=e("#events/1.0.0/events"),u=".trigger-events-",a=i.extend({attrs:{trigger:null,triggerType:"click",zIndex:999,title:"",content:"",hasMask:!1,onConfirm:function(){},onClose:function(){}},parseElement:function(){a.superclass.parseElement.call(this),this.set("trigger",r(this.get("trigger"))),this.set("titleElement",this.$("[data-role=title]")),this.set("contentElement",this.$("[data-role=content]"))},events:{"click [data-role=confirm]":"confirm","click [data-role=cancel]":"close","click [data-role=close]":"close"},confirm:function(){this.trigger("confirm")},close:function(){this.trigger("close"),this.hide(),this.activeTrigger&&this.activeTrigger.focus()},show:function(){return a.superclass.show.call(this),this._contentFunction&&this.get("contentElement").html(this._contentFunction.call(this)),this._titleFunction&&this.get("titleElement").html(this._titleFunction.call(this)),this.element.focus(),this},destroy:function(){return this.get("trigger").off(this.get("triggerType")+u+this.cid),a.superclass.destroy.call(this)},setup:function(){a.superclass.setup.call(this),this._setupTrigger(),this._setupMask(),this._setupKeyEvents(),f(this.element),f(this.get("trigger"))},_setupTrigger:function(){var e=this;this.get("trigger").on(this.get("triggerType")+u+this.cid,function(t){t.preventDefault(),e.activeTrigger=r(this),e.show()})},_setupMask:function(){this.before("show",function(){this.get("hasMask")&&s.show()}),this.before("hide",function(){this.get("hasMask")&&s.hide()})},_setupKeyEvents:function(){this.delegateEvents("keyup",function(e){e.keyCode===27?this.close():e.keyCode===13&&this.confirm()})},_onRenderTitle:function(e){r.isFunction(e)?this._titleFunction=e:(this._titleFunction=null,this.get("titleElement").html(e))},_onRenderContent:function(e){r.isFunction(e)?this._contentFunction=e:(this._contentFunction=null,this.get("contentElement").html(e))}});n.exports=a});